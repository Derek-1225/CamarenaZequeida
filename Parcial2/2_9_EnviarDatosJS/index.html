<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulario</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
</head>
<body>
    <form id="formularioDatos" enctype="application/x-www-form-urlencoded"> 
        <label for="nombre" class="form-label">Nombre:</label>
        <input type="text" name="nombre" id="nombre" class="form-control form-control-sm">
        <br><br>
        <label for="apellido" class="form-label">Apellidos:</label>
        <input type="text" name="apellido" id="apellido" class="form-control">
        <br><br>
        <div class="d-grid gap-2 col-6 mx-auto">
            <button type="submit" class="btn btn-success">Enviar</button>
            <button id="btnEnviar" class="btn btn-info">Enviar usando FormData</button>
        </div>
    </form>
    <iframe name="resultadoPOST"></iframe>
    <script>
        /*const formD=document.getElementById("formularioDatos")
        formD.addEventListener("submit",()=>{
            let datosForm= new FormData(this);
            let cadenaUrl = new URLSearchParams(datosForm).toString();
            fetch("https:httpbin.org/post",{
            method:'POST',
            headers:{'Content-Type':'application/x-www-form-urlencoded'},
            body: cadenaUrl
            })
            .then(response=>response.json())
            .then(data=>{console.log('Peticion con FormData ',data)})
        })*/
       const formulario = document.getElementById('formularioDatos');
        formulario.addEventListener('submit', async (e) => {
        e.preventDefault(); // Evita que se recargue la p√°gina

        // Crear objeto FormData con los datos del formulario
        const datos = new FormData(formulario);
        let cadenaUrl = new URLSearchParams(datos).toString();
        try {
            // Enviar los datos con fetch
            let respuesta = await fetch('https://httpbin.org/post', {
            method: 'POST',
            headers:{'Content-Type':'application/x-www-form-urlencoded'},
            body: cadenaUrl
            });

            // Obtener respuesta en formato JSON
            const resultado = await respuesta.json();
            console.log(resultado);
        } catch (error) {
            console.log(error);
        }
        });
    </script>
</body>
</html>